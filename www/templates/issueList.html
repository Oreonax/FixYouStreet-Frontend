<ion-view view-title="List of issues in the area">
  <ion-nav-bar>
    <ion-nav-back-button>
    </ion-nav-back-button>
    <ion-nav-buttons side="secondary">
      <button type="button" ng-controller="LogoutCtrl" ng-click="logOut()" class="button">Log Out</button>
    </ion-nav-buttons>
  </ion-nav-bar>

  <ion-content>
    <ion-list ng-controller="ListIssuesAreaCtrl">
          <ion-item ng-repeat="issue in issues">

            <div class="row">
              <div class="col">
                <span ng-if='!issue.imageUrl'><img  src='img/NoImageAvailable.jpg' style="width:100%" alt="No Image Available" /></span>
                <span ng-if='issue.imageUrl'><a ui-sref='fullImg({imageURL: issue.imageUrl})'><img src='{{issue.imageUrl}}' style="width:100%" /></a></span>
              </div>
              <div class="col col-75 item-body listIssue">
                <h2>{{issue.issueType.description}}<time>{{issue.createdOn | date:'MM/dd/yyyy - H:mm'}}</time></h2>
                  <ul class="tagsList">
                      <li ng-repeat="tag in issue.tags">{{tag}}</li>
                  </ul>
                <p>{{issue.description}}</p>
                <p>State:{{issue.state}}</p>
                <p>Type: <time>{{issue.issueType.name}}</time></p>
                <p>Last update: <time>{{issue.updatedOn | date:'MM/dd/yyyy - H:mm'}}</time></p>

                <div class="button-bar">
                    <a class="button button-small ion-location" > Show on map</a>
                  <a class="button button-small" ui-sref="issueDetails({issueId: issue.id})"> Issue details</a>
                  <a class="button button-small ion-navicon" ui-sref="commentsList({issueId: issue.id})"> View comments</a>
                </div>
              </div>
            </div>

          </ion-item>

      </ion-list>

  </ion-content>
</ion-view>
